(this["webpackJsonpscrummy-web"]=this["webpackJsonpscrummy-web"]||[]).push([[0],{17:function(e,t,a){e.exports=a(41)},22:function(e,t,a){},23:function(e,t,a){},41:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(16),s=a.n(c),l=(a(22),a(23),a(6)),o=a(2),m=a(5),u=a.n(m),i=function(){return u.a.get("http://127.0.0.1:8000/api/projects/").then((function(e){return e})).catch((function(e){return Promise.reject(e)}))},b=function(e){var t=e.className,a=Object(n.useState)([]),c=Object(o.a)(a,2),s=c[0],m=c[1],u=Object(n.useState)(!1),i=Object(o.a)(u,2),b=i[0],f=i[1],p=Object(n.useRef)(),v=Object(n.useRef)();return r.a.createElement("div",{className:t},r.a.createElement("div",{className:"create-project-form col-md-4 mx-auto col-10 my-3"},r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t=p.current.value,a=v.current.value,n=Object(l.a)(s);n.unshift({title:t,description:a,id:3333,begin_date:Date.now(),user:{username:"cobyforrester"}}),m(n),p.current.value="",v.current.value=""}},b?r.a.createElement("textarea",{ref:p,required:!0,name:"title",className:"form-control my-3",placeholder:"Project Name"}):null,b?r.a.createElement("textarea",{ref:v,required:!0,name:"description",className:"form-control",placeholder:"Description"}):null,r.a.createElement("div",{className:"btn btn-group"},b?r.a.createElement("button",{type:"submit",className:"btn btn-warning my-2 mx-1"},"Submit"):null,b?r.a.createElement("button",{onClick:function(){f(!1)},type:"submit",className:"btn btn-secondary my-2 mx-1"},"Cancel"):null,b?null:r.a.createElement("button",{onClick:function(){f(!0)},type:"submit",className:"btn btn-success my-2 mx-1"},"Create New Project")))),r.a.createElement(d,{newProjects:s}))},d=function(e){var t=Object(n.useState)([]),a=Object(o.a)(t,2),c=a[0],s=a[1],m=Object(n.useState)([]),u=Object(o.a)(m,2),b=u[0],d=u[1];return Object(n.useEffect)((function(){var t=Object(l.a)(e.newProjects).concat(c);t.length!==b.length&&d(t)}),[c,b,e.newProjects]),Object(n.useEffect)((function(){i().then((function(e){200===e.status&&s(e.data)})).catch((function(e){console.log(e)}))}),[]),b.map((function(e,t){return r.a.createElement(f,{project:e,key:"".concat(t,"-item.id")})}))},f=function(e){var t=e.project;return r.a.createElement("div",{className:"col-10 mx-auto col-md-6"},r.a.createElement("div",{className:"card border mb-4 mt-4"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h2",{className:"card-title"},t.title),r.a.createElement("h5",{className:"card-title"},"Started: ",t.begin_date),r.a.createElement("h5",{className:"card-title"},"Project Owner ",t.user.username),r.a.createElement("p",{className:"card-text"},t.description),r.a.createElement(p,{project:t}))))},p=function(e){var t=e.project,a=Object(n.useState)(!1),c=Object(o.a)(a,2),s=c[0],l=c[1],m=Object(n.useState)(""),i=Object(o.a)(m,2),b=i[0],d=i[1],f=Object(n.useState)(0),p=Object(o.a)(f,2),v=p[0],E=p[1],j=Object(n.useRef)(),h=function(e){var a=j.current.value;""===a?(d("Error: No username typed"),E(2)):function(e){var t={id:e.id,action:e.action,member:e.member};return u.a.post("http://127.0.0.1:8000/api/projects/action/",t,{headers:{}}).then((function(e){return e})).catch((function(e){return Promise.reject(e)}))}(t.id).then((function(t){var n="Success!";200!==t.status&&201!==t.status||("add"===e?(n="Success! User "+a+" was added to project",j.current.value=""):n="Success! User "+a+" was removed from project",d(n),E(1),j.current.value="")})).catch((function(e){var t="";t=void 0===e.response.data.message?403===e.response.status?"Database Error: You are not logged in":e.message:"Database Error: "+e.response.data.message,d(t),E(2)}))};return r.a.createElement(r.a.Fragment,null,1===v?r.a.createElement("div",{className:"alert alert-success",role:"alert"},b):null,2===v?r.a.createElement("div",{className:"alert alert-danger",role:"alert"},b):null,r.a.createElement("form",null,s?r.a.createElement("textarea",{required:!0,className:"member-form",ref:j,placeholder:"Enter Username"}):null),r.a.createElement("div",{className:"btn btn-group"},s?r.a.createElement("button",{onClick:function(){h("add")},className:"btn btn-success btn-sm mx-1"},"Add Username"):null,s?r.a.createElement("button",{onClick:function(){h("remove")},className:"btn btn-danger btn-sm mx-1"},"Remove User"):null,s?null:r.a.createElement("button",{onClick:function(){l(!0),E(0)},className:"btn btn-info btn-sm mx-1"},"Add/Remove Members"),s?r.a.createElement("button",{onClick:function(){j.current.value="",l(!1),E(0)},className:"btn btn-light btn-sm mx-1"},"Cancel"):null))};var v=function(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"}),r.a.createElement("div",null,r.a.createElement(b,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var E=document.getElementById("root");E&&s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(v,null)),E),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[17,1,2]]]);
//# sourceMappingURL=main.3fd21075.chunk.js.map